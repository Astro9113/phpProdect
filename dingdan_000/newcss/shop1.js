var $=function(a){return a?"object"==typeof a?new B(a):"string"==typeof a?0===a.indexOf("#")?new B(document.querySelector(a)):new B(document.querySelectorAll(a)):void 0:null},$$=function(a){return 0===a.indexOf("#")?document.querySelector(a):document.querySelectorAll(a)},B=function(a){this.dom=a,this.parent=function(){return new B(a.parentNode)},this.children=function(){return new B(a.children)},this.eq=function(b){return new B(a[b])},this.length=function(){return a?a.length?a.length:a.innerHTML||a.value||a.tagName?1:0:0},this.css=function(b,c){var d,e,f,g;if("object"==typeof b){for(d in b)e=d,f=d.indexOf("-"),-1!=f&&(g=d.substring(f+1,f+2),d=d.replace("-"+g,g.toUpperCase())),a.style[d]=b[e];return this}return f=b.indexOf("-"),-1!=f&&(g=b.substring(f+1,f+2),b=b.replace("-"+g,g.toUpperCase())),b&&!c?a.style[b]:(a.style[b]=c,this)},this.attr=function(b,c){if("object"==typeof b){for(var d in b)a.setAttribute(d,b[d]);return this}return b&&!c?a.getAttribute(b):(a.setAttribute(b,c),this)},this.val=function(b){return b||"string"==typeof b?(a.value=b,this):a.value},this.html=function(b){var c="number"==typeof b?b.toString():b;return c||"string"==typeof arguments[0]?(a.innerHTML=c,this):a.length?a[0].innerHTML:a.innerHTML},this.prev=function(){return new B(a.previousElementSibling)},this.next=function(){return new B(a.nextElementSibling)},this.addClass=function(b){var d,e,c=this.length();if(1==c)return a.length?a[0].classList?a[0].classList.add(b):(d=a[0].className,-1==d.indexOf(b)&&(a[0].className=d+" "+b)):a.classList?a.classList.add(b):(d=a.className,-1==d.indexOf(b)&&(a.className=d+" "+b)),this;if(c>1){if(a[0].classList)for(e=c;e--;)a[e].classList.add(b);else for(e=c;e--;)d=a[e].className,-1==d.indexOf(b)&&(a[e].className=d+" "+b);return a[c-1]}},this.removeClass=function(b){var d,e,c=this.length();if(1==c)return a.length?a[0].classList?a[0].classList.remove(b):(d=a[0].className,-1!=d.indexOf(b)&&(a[0].className=d.replace(b,""))):a.classList?a.classList.remove(b):(d=a.className,-1!=d.indexOf(b)&&(a.className=d.replace(b,""))),this;if(c>1){if(a[0].classList)for(e=c;e--;)a[e].classList.remove(b);else for(e=c;e--;)d=a[e].className,-1!=d.indexOf(b)&&(a[e].className=d.replace(b,""));return a[c-1]}},this.clearClass=function(){var c,b=a.length;if(b){for(c=b;c--;)a[c].className="";return a[b-1]}return a.className="",this},this.hasClass=function(b){return a.classList?a.classList.contains(b):-1!=a.className.indexOf(b)?!0:!1},this.show=function(){return a.style.display="block",this},this.hide=function(){return a.style.display="none",this},this.remove=function(){a.parentNode.removeChild(a)},this.trigger=function(b){var c=document.createEvent("Event");return c.initEvent(b,!0,!0),a.dispatchEvent(c),this},this.bind=function(b,c){var d,e;if(a.length){if(1!=a.length){for(d=this.length(),e=d;e--;)a[e].addEventListener(b,function(){c.call(this)},!1);return a[d-1]}a[0].addEventListener(b,function(){c.call(this)},!1)}else{if(!(a.innerHTML||a===window||a.value||a.tagName))return null;a.addEventListener(b,function(){c.call(this)},!1)}return this},this.unbind=function(b,c){return a.removeEventListener(b,c,!1),this},this.width=function(){return a.offsetWidth},this.height=function(){return a.offsetHeight},this.offset=function(){return{top:a.offsetTop,left:a.offsetLeft}},this.find=function(b){return new B(a.querySelectorAll(b))},this.append=function(b){return"string"==typeof b?a.innerHTML+=b:a.appendChild(b),this},this.fadeIn=function(b,c,d){var f,e=this,g=!1;"function"==typeof b?(f=200,g=!0):f=b>200?b:200,d?(e.css("webkitTransition","opacity 200ms ease"),setTimeout(function(){e.css("opacity",.1);var d=function(){$(this).hide(),g?b.call(this):c&&c.call(this),a.removeEventListener("webkitTransitionEnd",d,!1)};a.addEventListener("webkitTransitionEnd",d,!1)},100)):(e.css({opacity:0,display:"block",webkitTransition:"opacity "+f+"ms ease"}),setTimeout(function(){e.css("opacity",1);var d=function(){g?b.call(this):c&&c.call(this),a.removeEventListener("webkitTransitionEnd",d,!1)};a.addEventListener("webkitTransitionEnd",d,!1)},100))},this.fadeOut=function(a,b){this.fadeIn(a,b,!0)},this.animate=function(a,b,c,d,e){var i,j,p,q,r,s,t,u,v,w,f=document.createElement("div").style,g=function(){for(var b,a="webkitT,msT,OT".split(","),c=0,d=a.length;d>c;c++)if(b=a[c]+"ransform",b in f)return a[c].substr(0,a[c].length-1);return!1}();g?"-"+g.toLowerCase()+"-":"",i=function(){if(!g)return!1;var a={"":"transitionend",webkit:"webkitTransitionEnd",O:"otransitionend",ms:"MSTransitionEnd"};return a[g]}(),j=function(a){return g?(a=a.charAt(0).toUpperCase()+a.substr(1),g+a):a},j("transform"),j("transitionProperty"),j("transitionDuration"),j("transitionTimingFunction"),j("transitionDelay"),p=new Array;for(q in a)p.push(q);for(r=function(a){c?c.call(this):"",a.target.removeEventListener(i,r,!1)},s=[],t=p.length;t--;)s.push(p[t]+" "+(b?b/1e3+"s":".2s")+" "+(e?e/1e3+"s":"0s"));for(this.css("webkit-transition",s.join(",")).dom.addEventListener(i,r,!1),u=0,v=p.length;v>u;u++)w=p[u],this.css(w,a[w]);return this}},M={baseDomain:"http://"+document.domain,baseUrl:"",doc:document,win:window,w:document.body.offsetWidth,h:document.body.offsetHeight,sUrl:function(a,b,c){return a?b?M.baseUrl+"/item.html?itemID="+b+(c?"&"+c:""):M.baseUrl+"/?userid="+a+(c?"&"+c:""):void 0},toJSON:function(a){return JSON.stringify(a)},post:function(a,b,c){var g,h,i,j,k,l,m,d=new Date,e=d.getTime()+"_"+Math.random().toString().substr(2),f="post_"+e;window[f]=function(a){window[f]=void 0,c(a),h.removeChild(j),h.removeChild(i)},g=document,h=g.body,i=g.createElement("iframe"),i.style.display="none",i.name="post_iframe",i.src="about:blank",h.appendChild(i),j=g.createElement("form"),j.action=a,j.method="post",j.target="post_iframe",j.style.display="none",k=g.createElement("textarea"),k.name="param",k.value=b,j.appendChild(k),l=g.createElement("textarea"),l.name="callback",l.value=f,j.appendChild(l),m=g.createElement("textarea"),m.name="callbackURL",m.value="http://"+location.host+M.baseUrl+"/post_callback.html",j.appendChild(m),h.appendChild(j),j.submit()},jsonp:function(a,b,c){var d=new Date,e=d.getTime()+"_"+Math.random().toString().substr(2),f="jsonpcallback_"+e,g="interval_"+e;window[f]=function(a){window[f]=void 0,b&&b(a)},window[g]=setInterval(function(){new Date-d>8e3&&(clearInterval(window[g]),c&&c())},100),M.loadScript(a+(-1==a.indexOf("?")?"?callback=":"&callback=")+f,function(){clearInterval(window[g])})},get:function(a,b,c){function g(){d.abort(),c&&c()}var e,f,d=new XMLHttpRequest;d.open("GET",a,!0),d.send(),e=new Date,f=setInterval(function(){new Date-e>8e3&&(alert("网络不给力，一会再试试吧"),c&&c())},100),d.onreadystatechange=function(){if(4==d.readyState)switch(clearInterval(f),d.status){case 200:b(d.responseText);break;case 404:alert("404--URL地址未找到"),g();break;case 500:alert("500--服务器错误"),g()}}},lazyLoad:function(){var c,d,e,a=M.doc.getElementsByClassName("lazy_load"),b=a.length;if(b)for(c=[],d=M.baseUrl+"/images/default_img.png",e=0;b>e;e++)!function(b){var e=b,f=a[e],g=f.getAttribute("data-src"),h=f.className;f.src=d,c[e]=new Image,c[e].src=g,c[e].onload=function(){f.src=g,f.className=h.replace("lazy_load","")}}(e)},loadScript:function(a,b){var d,c=document.createElement("script");c.readyState?c.onreadystatechange=function(){("loaded"==c.readyState||"complete"==c.readyState)&&(c.onreadystatechange=null,b&&b())}:c.onload=function(){b&&b()},c.src=a.indexOf("?")>0?a+"&ver="+M.version:a+"?ver="+M.version,d=document.getElementsByTagName("script")[0],d.parentNode.insertBefore(c,d)},json:function(a){return JSON.parse(a)},urlQuery:function(a){var c,d,b=location.search;return b=b.replace(/#[^&]*$/,""),c=b.substr(b.indexOf(a)),d=new Array,d=-1==c.indexOf("&")?c.split("="):c.substr(0,c.indexOf("&")).split("="),d[1]},getCookie:function(a){var b,c;return localStorage?localStorage.getItem(a)?localStorage.getItem(a):sessionStorage.getItem(a)?sessionStorage.getItem(a):"":(b=document.cookie.indexOf(a),c=document.cookie.indexOf(";",b),-1==b?"":unescape(document.cookie.substring(b+a.length+1,c>b?c:document.cookie.length)))},setCookie:function(a,b,c){if(localStorage)c?sessionStorage.setItem(a,b):localStorage.setItem(a,b);else{var d=new Date;d.setTime(d.getTime()+2592e6),document.cookie=c?escape(a)+"="+escape(b)+"/":escape(a)+"="+escape(b)+(d?"; expires="+d.toGMTString():"")+"/"}},delCookie:function(a){localStorage?localStorage.getItem(a)?localStorage.removeItem(a):sessionStorage.getItem(a)?sessionStorage.removeItem(a):"":document.cookie=a+"=;expires="+new Date(0).toGMTString()},clearCookie:function(){var a,b,c;if(localStorage)localStorage.clear();else if(a=document.cookie.match(/[^ =;]+(?=\=)/g))for(b=a.length,c=b;c--;)document.cookie=a[c]+"=0;expires="+new Date(0).toUTCString()},ua:function(){return navigator.userAgent.toLowerCase()},isMobile:function(){return M.ua().match(/iPhone|iPad|iPod|Android|IEMobile/i)},isAndroid:function(){return-1!=M.ua().indexOf("android")?1:0},isIOS:function(){var a=M.ua();return-1!=a.indexOf("iphone")||-1!=a.indexOf("ipad")||-1!=a.indexOf("ipod")?1:0},platform:function(){return M.isMobile()?M.isIOS()?"IOS":M.isAndroid()?"Android":"other-mobile":"PC"},isWeixin:function(){return-1!=M.ua().indexOf("micromessenger")?1:0},isWeixinPay:function(){var a,b;return M.isWeixin()?(a=M.ua(),b=a.substr(a.indexOf("micromessenger"),18).split("/"),Number(b[1])>=5?1:0):0},_alert:function(a,b){var c,d,e,f;$("#_alert_bg").length()?$("#_alert_bg").show():(c=document,d=c.createElement("div"),d.setAttribute("id","_alert_bg"),c.body.appendChild(d),e=c.createElement("div"),e.setAttribute("id","_alert_content"),d.appendChild(e)),f=$("#_alert_content"),f.html(a).fadeIn(function(){setTimeout(function(){f.fadeOut(function(){$("#_alert_bg").hide(),b&&b()})},1500)})},_confirm:function(a,b,c,d,e){var h,i,j,f=document,g=f.createElement("div");g.setAttribute("id","_confirm_bg"),f.body.appendChild(g),h=f.createElement("div"),h.setAttribute("id","_confirm_content"),g.appendChild(h),i=$("#_confirm_content"),j="",j=j+"<p>"+a+"</p>",j+="<em id='_confirm_shadowA'>&nbsp;</em>",j+="<em id='_confirm_shadowB'>&nbsp;</em>",j+="<div id='_confirm_btnW'>",c&&c[0]?(j=j+"<div id='_confirm_btnA' class='"+b[1]+"'>"+b[0]+"</div>",j+="<em id='_confirm_shadowC'>&nbsp;</em>",j+="<em id='_confirm_shadowD'>&nbsp;</em>",j=j+"<div id='_confirm_btnB' class='"+c[1]+"'>"+c[0]+"</div>"):j=j+"<div id='_confirm_btnA' class='"+b[1]+"' style='width:100%'>"+b[0]+"</div>",j+="</div>",i.html(j).fadeIn(),$("#_confirm_btnA").bind("click",function(){e&&e(),i.fadeOut(function(){$("#_confirm_bg").remove()})}),c&&c[0]&&$("#_confirm_btnB").bind("click",function(){d&&d(),i.fadeOut(function(){$("#_confirm_bg").remove()})})},trimVal:function(a){return a.replace(/(^\s*)|(\s*$)/g,"")},checkform:function(a){var c,d,e,f,g;return a=a,11!=a.length?!1:(c=/^13\d{5,9}$/,d=/^15\d{5,9}$/,e=/^18\d{5,9}$/,f=/^14\d{5,9}$/,g=!1,c.test(a)&&(g=!0),d.test(a)&&(g=!0),e.test(a)&&(g=!0),f.test(a)&&(g=!0),g?!0:!1)},init:function(){setTimeout(function(){try{localStorage.setItem("_justfortest",1)}catch(a){M._confirm("请关闭无痕浏览模式以获得更好的浏览体验",["我知道了",""])}},100)}};$(window).bind("load",function(){M.init()});